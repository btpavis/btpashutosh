<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Working with Message Headers and Properties - Ashutosh Vishwakarma</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="../styles.css">
    <style>
        /* Article-specific styles for better readability */
        .article-content {
            background-color: var(--card-bg-color);
            border-radius: 1rem;
            padding: 3rem;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);
        }
        .article-content h1, .article-content h2, .article-content h3 {
            color: var(--primary-color);
            font-weight: 700;
            margin-top: 2rem;
            margin-bottom: 1rem;
        }
        .article-content p {
            font-size: 1.1rem;
            line-height: 1.8;
            color: var(--text-color-dark);
            margin-bottom: 1.5rem;
        }
        .article-content ul {
            padding-left: 2rem;
            margin-bottom: 1.5rem;
        }
        .article-content li {
            margin-bottom: 0.5rem;
            color: var(--text-color-dark);
        }
        .code-block {
            background-color: #f8f9fa;
            border: 1px solid var(--border-color);
            border-left: 4px solid var(--secondary-color);
            padding: 1.5rem;
            margin: 2rem 0;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.95rem;
            overflow-x: auto;
            border-radius: 0.5rem;
        }
        .back-link {
            display: inline-block;
            margin-bottom: 2rem;
            color: var(--primary-color);
            font-weight: 600;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        .back-link:hover {
            color: var(--secondary-color);
        }
        .section {
            padding: 5rem 0;
            scroll-margin-top: 100px;
        }
        .section-heading {
            text-align: center;
            margin-bottom: 2.5rem;
            font-size: 2.2rem;
            font-weight: 800;
            letter-spacing: -0.03em;
            color: var(--primary-color);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.9rem;
        }
        .section-heading i {
            color: var(--secondary-color);
        }
        .section-heading::after {
            content: '';
            position: absolute;
            left: 50%;
            bottom: -15px;
            transform: translateX(-50%);
            width: 70px;
            height: 4px;
            background-color: var(--secondary-color);
            border-radius: 2px;
        }
    </style>
</head>
<body>

    <nav class="navbar">
        <div class="container navbar-container">
            <a href="../index.html" class="navbar-logo">Ashutosh Vishwakarma</a>
        </div>
        <div class="dropdown-menu" id="dropdown-menu">
            <a href="index.html#about">About</a>
            <a href="index.html#skills">Skills</a>
            <a href="learning.html">Learning & Insights</a>
            <a href="index.html#certs">Certifications</a>
            <a href="index.html#contact">Contact</a>
        </div>
    </nav>

    <main class="container">
        <section class="section">
            <a href="../groovy_javascript.html" class="back-link">&larr; Back to Groovy & JavaScript</a>
            <h2 class="section-heading" data-animate>
                <i class="fas fa-code"></i> Working with Message Headers and Properties
            </h2>
            <div class="article-content" data-animate>
                <p>In SAP CPI, <strong>Message Headers</strong> and <strong>Message Properties</strong> are crucial for storing and sharing data throughout an integration flow. While they both store key-value pairs, they have different use cases and lifecycle.</p>
                
                <h3>Headers vs. Properties: What's the Difference?</h3>
                <ul>
                    <li><strong>Headers:</strong> Are a fundamental part of the message itself, often containing technical information like HTTP request headers. They are typically used for temporary, transport-related data and are passed with the message payload from one step to another.</li>
                    <li><strong>Properties:</strong> Are part of the integration flow's execution context. They persist for the entire duration of the message processing and can be accessed by any step in the flow. They are ideal for storing business-specific data or intermediate values that you need to reference later.</li>
                </ul>

                <h3>Accessing and Manipulating Data in Groovy</h3>
                <p>You can use the <strong>Message</strong> object to access both headers and properties. The methods are very straightforward: 'getHeader()', 'getProperties()', 'setHeader()', and 'setProperty()'.</p>

                <h4>Example Groovy Script:</h4>
                <div class="code-block">
<pre>
import com.sap.gateway.ip.core.customdev.util.Message

def Message processData(Message message) {

    // --- Working with Headers ---
    // Get a header value
    def contentType = message.getHeader('Content-Type')
    
    // Set a new header
    message.setHeader('sap-cpi-user', 'ashutosh-v')

    // Remove a header
    message.removeHeader('Content-Length')

    // --- Working with Properties ---
    // Get a property value
    def vendorId = message.getProperty('Vendor_ID')
    
    // Set a new property
    message.setProperty('ProcessedBy', 'GroovyScript')
    message.setProperty('Timestamp', new Date())
    
    // Get all properties as a map
    def allProperties = message.getProperties()

    return message
}
</pre>
                </div>
                <p>By effectively using headers and properties, you can create modular and robust integration flows, avoiding complex logic in a single script and instead passing data seamlessly between different steps.</p>
            </div>
        </section>
    </main>

    <footer class="footer">
        <p>Â© 2024 Ashutosh Vishwakarma. Built with modern web standards.</p>
    </footer>

    <script>
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const dropdownMenu = document.getElementById('dropdown-menu');
        
        mobileMenuBtn.addEventListener('click', () => {
            dropdownMenu.classList.toggle('active');
        });

        dropdownMenu.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                dropdownMenu.classList.remove('active');
            });
        });

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.setAttribute('data-animate', 'true');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('[data-animate]').forEach(element => {
            observer.observe(element);
        });
    </script>
</body>
</html>